# event-sourcing

Выполнил: студент группы М34371, Хлытин Григорий.

## Task:

Цель: получить практический опыт реализации event-sourcing систем и применения принципов CQRS.

Необходимо реализовать информационную систему для фитнес-центра. Клиенты фитнес-центра могут приобретать и продлевать
абонементы. При входе и выходе из фитнес-центра, клиент обязан приложить абонемент для прохода. Система позволяет
строить различные отчеты на базе статистики собранной в ходе работы сервиса.

Система состоит из трех частей:

1. Веб сервис для менеджера, позволяет

+ Просматривать информацию о абонементах (по номеру)
+ Выдавать и продлевать абонементы

2. Сервис отчетов, позволяет

+ просмотреть статистику посещение по дням
+ считать среднюю частоту и длительность посещений

3. Модуль входа/выхода

+ пускает клиента, если у него действующий абонемент
+ сохраняет в базе время входа/выхода клиента

Указания:

+ Система должна быть построена на базе event-sourcing подхода
+ Команды и запросы должны строго разделяться (CQRS-принцип)
+ Сами события должны храниться в персистентном хранилище.
+ Сервис для менеджера и модуль входа/выхода не имеют отдельной базы, и при запросе вытаскивают все события об
  абонементе из хранилища событий, агрегирую их на лету.
+ Сервис отчетов, наоборот, при старте вычисляет статистику и сохраняет ее в памяти, обновляя новыми событиями (но можно
  и хранить в отдельном персистентном хранилище).

Баллы:

+ 20 баллов
+ необходимо добавить тесты (без тестов -5 баллов)

## Tests:

![log](https://github.com/grifguitar/soft-design/blob/main/event-sourcing/log.png)
